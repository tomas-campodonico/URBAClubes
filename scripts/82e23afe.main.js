"use strict";$(document).ready(function(){function a(){$(".instructionsModal").hasClass("opened")?($(".instructionsModal").removeClass("opened"),$(".instructionsModal").addClass("hidden")):($("aside").toggleClass("opened"),$(".searchBox input").val(""))}function b(a){var b,c,d,e;0===$(this).find(".ink").length&&$(this).prepend('<span class="ink"></span>'),b=$(this).find(".ink"),b.removeClass("animate"),b.height()||b.width()||(c=Math.max($(this).outerWidth(),$(this).outerHeight()),b.css({height:c,width:c})),d=a.pageX-$(this).offset().left-b.width()/2,e=a.pageY-$(this).offset().top-b.height()/2,b.css({top:e+"px",left:d+"px"}).addClass("animate")}function c(a){var b=$.Deferred();return navigator.geolocation.getCurrentPosition(b.resolve,b.reject,a),b.promise()}function d(a){h.route(a,function(a,b){b===google.maps.DirectionsStatus.OK&&(i.setDirections(a),$(".instructionsButton").removeClass("hidden"))})}function e(a){navigator.geolocation?$.when(f).done(function(b){console.dir(b),d({origin:new google.maps.LatLng(b.coords.latitude,b.coords.longitude),destination:new google.maps.LatLng(a.lat,a.lon),travelMode:google.maps.TravelMode.DRIVING})}):($(".noGeolocationAlert").removeClass("hidden"),setTimeout(function(){$(".noGeolocationAlert").addClass("hidden")},6e3))}var f,g={zoom:9,mapTypeId:google.maps.MapTypeId.ROADMAP,center:new google.maps.LatLng(-34.840013,-58.265991)},h=new google.maps.DirectionsService,i=new google.maps.DirectionsRenderer,j=new google.maps.Map($("#map-canvas")[0],g);$(".toggleMenuButton").on("click",a),$(".backshadow").on("click",a),$(".instructionsButton").on("click",function(a){b.call(a.currentTarget,a),$(".instructionsModal").removeClass("hidden"),$(".instructionsModal").addClass("opened")}),$(".searchBox input").on("keyup",function(){var a=$(".searchBox input").val().toLowerCase();$(".clubList li").each(function(b,c){-1!==c.dataset.name.toLowerCase().indexOf(a)||-1!==$(c).text().toLowerCase().indexOf(a)?$(c).removeClass("hidden"):$(c).addClass("hidden")})}),i.setMap(j),i.setPanel($(".instructionsModal .instructions")[0]),navigator.geolocation&&(f=c()),$.getJSON("/URBAClubes/clubes.json",function(c){$.each(c,function(a,b){$(".clubList").append('<li data-name="'+b.name+'" data-lat="'+b.lat+'" data-lon="'+b.lon+'">'+b.shortName+"</li>")}),$(".clubList li").on("click",function(c){b.call(c.currentTarget,c),a(),e({name:$(c.currentTarget).text(),lat:c.currentTarget.dataset.lat,lon:c.currentTarget.dataset.lon})})})});